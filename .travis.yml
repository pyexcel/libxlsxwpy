language: python
notifications:
  email: false
compiler:
  - clang
  - gcc
python:
  - 2.7
install:
  - sudo pip install pytest
  - sudo apt-get update
  - sudo apt-get install -y gcc-multilib
  - sudo apt-get install -y zlib1g-dev
  - sudo apt-get install -y zlib1g-dev:i386
  - sudo apt-get install -y gcc
  - sudo apt-get install -y valgrind
before_install:
  - pip install -r tests/requirements.txt
  - wget https://github.com/jmcnamara/libxlsxwriter/archive/RELEASE_0.4.2.tar.gz
  - tar xzvf RELEASE_0.4.2.tar.gz
  - cd RELEASE_0.4.2
  - make
  - sudo make install
  - cd ../
script:
  - CFLAGS="-coverage" python setup.py build_ext --inplace
  - python setup.py install
  - make test
  - find build
